sequenceDiagram
    participant User as Client (Browser/REST Client)
    participant API as Django API (ChatMessageCreateView)
    participant Flow as continue_chat()
    participant Bot as ChatBot (via bot_factory)
    participant DB as Database (ChatMessage)

    User->>API: POST /session/{id}/chat {"prompt": "..."}
    API->>Flow: continue_chat(session, prompt)
    Flow->>Bot: bot_factory(session, messages) â†’ bot
    Flow->>Bot: send_prompt(bot, prompt)
    Bot-->>Flow: (response_json, answer)
    Flow->>DB: save_message(session, prompt, response, answer)
    DB-->>Flow: ChatMessage object
    Flow-->>API: ChatMessage object
    API-->>User: 201 Created + JSON (ChatMessageOutSerializer)
